# 变量与赋值

## 什么是变量


> 一道数学题：
> 甲、乙两个工程队共同铺铁路，16天共铺2144米。甲队每天铺70米，乙队每天铺多少米？

```
设乙队每天铺x米。
则： (70 + x) * 16 = 2144
```

数学中用变量x

变量即在程序运行过程中它的值是允许改变的量。 
变量没有固定的值，以非数字的符号来表达，通常用拉丁字母。


### 变量的命名规则

变量： 标识符的第一个字符必须是字母表中的字母（大写或小写）或者一个下划线（'\_'），标识符名称的其他部分可以由字母（大写或小写）、下划线或者数字组成。标识符对大小写敏感。例如 myname 和 myName 不是一个标识符。

以下关键字不能当做变量使用：

['and', 'as', 'assert', 'break', 'class', 'continue', 'def', 'del', 'elif', 'else', 'except', 'exec', 'finally', 'for', 'from', 'global', 'if', 'import', 'in', 'is', 'lambda', 'not', 'or', 'pass', 'print', 'raise', 'return', 'try', 'while', 'with', 'yield']

### 赋值

在编程语言中，变量的目的是用来存储数据，以方便后面的使用。

什么是赋值？

中国好声音中的两个选手 A 和 B 进行 PK，评委进行投票。

第一排评委的票数是：A: 5票 B: 0票
第二排评委的票数是：A: 3票 B: 4票
第三排评委的票数是：A: 1票 B: 6票
第四排评委的票数是：A: 3票 B: 6票
第五排评委的票数是：A: 9票 B: 1票

a = 5
b = 0

a = a + 3
b = b + 4

使用等号（=）来完成赋值操作。

> 变量名 = 表达式

```python
i = 10
s = 'Hello wolrd'
arr = [1, 2, 3]
```

注意：在Python中，赋值并不是直接将一个值赋给一个变量，而是将该对象的引用赋值给变量。（暂时不理解这个概念不要紧，后面会解释）

大多数编译型语言，变量在使用前必须先声明，但是在Python中，无需显式的声明变量，变量在第一次被赋值的时候自动声明。

```
a = 10 的内存分布情况
                     +----------+
                     |          |
   +-------+         | +------+ |
   |  a    |---------->|  10  | |
   +-------+         | +------+ |
                     |          |
                     |          |
                     |          |
                     |  内存    |
                     +----------+

1. 先在内存中开辟一块区域，存放10
2. 在内存中建立一个变量a
3. 将这个标记指向内存中的值

a = 10
b = a
a = 20
此时b=？
```

> 与其他大多数语言一样，变量只有被创建和赋值后才能被使用。

```
>>> a
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'a' is not defined
```

变量一旦被赋值，就可以通过变量名来访问它。

```
>>> a = 10
>>> a
10
```

**"多元"赋值**

将多个变量同时赋值的方法称为多元赋值（multuple），采用这种方法赋值时，等号两边的对象都是元组。

```
>>> x, y, z = 1, 2, 'a string'
>>> x
1
>>> y
2
>>> z
'a string'
```

### 动态类型

在Python中，对象的类型和内存占用都是运行时确定的。在创建变量的时候，Python解释器会根据语法和右侧的操作数来决定新对象的类型。

### 内存分配

Python解释器承担了内存管理的复杂任务，从而简化了应用程序的编写。因此我们只要关心自己所需解决的问题，至于底层的事情就交给Python解释器去完成。

### 引用计数

Python用一个变量来保存内存中的每个对象引用数量，每个对象有多少引用，就称为引用计数。当对象被创建的时候就会创建一个引用计数，当这个对象的引用计数变为0的时候，就会被当做垃圾，等待回收。

```
>>> x = 3.14
>>> y = x
>>> id(x)
8738464
>>> id(y)
8738464
```

![](media/14567388019662/14568040331384.jpg)

如上图所示，y = x创建了一个指向同一对象的别名y，并不是为y创建一个新的变量，而是将该对象的引用计数增加了一次。

```
>>> x = 'panshang'
>>> id(x)
140684218050768
>>> id(y)
8738464
```

![](media/14567388019662/14568148472260.jpg)

x = 'panshang'将x指向'panshang'这一对象，原来的3.14这个对象的引用自动减1。
使用del语句可以手动删除一个对象的引用。

> del obj1, [obj2, ...]
 
```
del y
```

![](media/14567388019662/14568154214727.jpg)

此时3.14这个对象就没有引用指向它，引用计数就是0。
